(function($){$.fn.draggableviewport=function(options){var defaults={draggableContent:".content",allowVertical:true,allowHorizontal:true,animationLength:200};var settings=$.extend({},defaults,options);return this.each(function(){var $viewport=$(this),$content=$viewport.find(settings.draggableContent);var mouseIsDown=false,currX,currY,maxTop=0,maxLeft=0,maxRight=$viewport.width()>$content.width?$content.width():$viewport.width(),maxBottom=$viewport.height()>$content.height?$content.height():$viewport.height();
$viewport.css({overflow:"hidden",cursor:"move"});$content.css({position:"absolute"});if(!settings.allowVertical)$viewport.css({cursor:"w-resize"});else if(!settings.allowHorizontal)$viewport.css({cursor:"n-resize"});$viewport.on("mousedown",function(e){mouseIsDown=true;currX=e.pageX;currY=e.pageY});$(document).on("mouseup",function(e){mouseIsDown=false;currX=0;currY=0;var pos=$content.position(),width=$content.width(),height=$content.height(),top=pos.top,left=pos.left,right=pos.left+width,bottom=
pos.top+height;if(top>maxTop)if(left>maxLeft)$content.animate({top:maxTop,left:maxLeft},settings.animationLength);else if(right<maxRight)$content.animate({top:maxTop,left:maxRight-width},settings.animationLength);else $content.animate({top:maxTop},settings.animationLength);else if(bottom<maxBottom)if(left>maxLeft)$content.animate({top:maxBottom-height,left:maxLeft},settings.animationLength);else if(right<maxRight)$content.animate({top:maxBottom-height,left:maxRight-width},settings.animationLength);
else $content.animate({top:maxBottom-height},settings.animationLength);else if(left>maxLeft)$content.animate({left:maxLeft},settings.animationLength);else if(right<maxRight)$content.animate({left:maxRight-width},settings.animationLength)});$(document).on("mousemove",function(e){if(mouseIsDown){diffX=e.pageX-currX;diffY=e.pageY-currY;var pos=$content.position(),top=pos.top,left=pos.left;if(settings.allowVertical)top+=diffY;if(settings.allowHorizontal)left+=diffX;$content.css({left:left,top:top});currX=
e.pageX;currY=e.pageY}})});return this}})(jQuery);